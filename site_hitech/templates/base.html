{% load static %}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Hitech NDT{% endblock %}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <style>
        /* Optimized Modern Navbar - Compact Version */
        .modern-navbar {
            background: linear-gradient(135deg, 
                rgba(15, 32, 39, 0.9) 0%, 
                rgba(32, 58, 67, 0.85) 50%, 
                rgba(44, 83, 100, 0.9) 100%);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-bottom: 1px solid rgba(255,255,255,0.15);
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 8px 0; /* Reduced padding */
        }
        
        .modern-navbar.scrolled {
            background: linear-gradient(135deg, 
                rgba(10, 25, 30, 0.95) 0%, 
                rgba(25, 45, 55, 0.95) 50%, 
                rgba(35, 65, 80, 0.95) 100%);
            backdrop-filter: blur(25px) saturate(200%);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            padding: 6px 0; /* Even more compact when scrolled */
        }
        
        /* Compact Brand Logo */
        .modern-navbar .navbar-brand {
            font-size: 20px; /* Reduced from 26px */
            font-weight: 700;
            background: linear-gradient(135deg, #00d4ff, #0099cc, #0066ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            transition: all 0.3s ease;
            padding: 8px 0; /* Compact padding */
            margin-right: 20px; /* Controlled spacing */
        }
        
        .modern-navbar .navbar-brand img {
            height: 32px; /* Reduced from 40px */
            margin-right: 8px; /* Reduced spacing */
            filter: drop-shadow(0 2px 8px rgba(0,0,0,0.2));
            transition: all 0.3s ease;
        }
        
        .modern-navbar .navbar-brand:hover {
            transform: scale(1.05); /* Reduced scale */
        }
        
        .modern-navbar .navbar-brand:hover img {
            transform: rotate(3deg) scale(1.1); /* Reduced rotation */
        }
        
        /* Compact Nav Links */
        .modern-navbar .nav-link {
            position: relative;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px; /* Reduced letter spacing */
            padding: 8px 12px !important; /* Much more compact */
            border-radius: 20px; /* Smaller radius */
            transition: all 0.3s ease;
            overflow: hidden;
            color: rgba(255,255,255,0.9) !important;
            font-size: 13px; /* Slightly smaller font */
            margin: 0 2px; /* Minimal margin */
        }
        
        .modern-navbar .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #00d4ff, #0066ff);
            transition: all 0.3s ease;
            transform: translateX(-50%);
            border-radius: 1px;
        }
        
        .modern-navbar .nav-link:hover::after {
            width: 70%; /* Reduced width */
        }
        
        .modern-navbar .nav-link:hover {
            background: linear-gradient(135deg, 
                rgba(0, 212, 255, 0.1), 
                rgba(0, 102, 255, 0.1));
            transform: translateY(-2px); /* Reduced movement */
            box-shadow: 0 6px 15px rgba(0, 212, 255, 0.2); /* Smaller shadow */
            color: #fff !important;
        }
        
        /* Compact Dropdown */
        .modern-navbar .dropdown-menu {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 12px; /* Smaller radius */
            box-shadow: 0 8px 25px rgba(0,0,0,0.1); /* Smaller shadow */
            padding: 8px 0; /* Reduced padding */
            margin-top: 8px; /* Reduced margin */
            min-width: 160px; /* Controlled width */
        }
        
        @keyframes dropdownFadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modern-navbar .dropdown-item {
            padding: 8px 16px; /* Compact padding */
            font-weight: 500;
            transition: all 0.2s ease;
            border-radius: 8px; /* Smaller radius */
            margin: 2px 8px; /* Minimal margin */
            font-size: 13px; /* Smaller font */
        }
        
        .modern-navbar .dropdown-item:hover {
            background: linear-gradient(135deg, #00d4ff, #0066ff);
            color: white;
            transform: translateX(4px); /* Reduced movement */
        }
        
        /* Compact Search */
        .modern-search {
            position: relative;
        }
        
        .modern-search .nav-link {
            background: linear-gradient(135deg, 
                rgba(0, 212, 255, 0.1), 
                rgba(0, 102, 255, 0.1));
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 50%;
            width: 36px; /* Reduced size */
            height: 36px; /* Reduced size */
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            padding: 0 !important; /* Remove padding */
            margin: 0 4px; /* Minimal margin */
        }
        
        .modern-search .nav-link i {
            font-size: 14px; /* Smaller icon */
        }
        
        .modern-search .nav-link:hover {
            background: linear-gradient(135deg, #00d4ff, #0066ff);
            transform: scale(1.1); /* Reduced scale */
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.3);
        }
        
        .modern-search .search-dropdown {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 212, 255, 0.2);
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            padding: 15px; /* Reduced padding */
            width: 280px; /* Reduced width */
            position: absolute;
            top: 100%;
            right: 0;
            z-index: 1000;
            display: none;
        }
        
        .modern-search .search-dropdown.show {
            display: block;
        }
        
        @keyframes searchDropdownFadeIn {
            from { opacity: 0; transform: translateY(-20px) scale(0.9); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        .search-dropdown .input-group .form-control {
            border-radius: 4px 0 0 4px;
            border: 1px solid #ced4da;
            padding: 0.5rem 1rem;
        }
        
        .search-dropdown .input-group .btn {
            border-radius: 0 4px 4px 0;
            padding: 0.5rem 1rem;
        }
        
        /* Search icon styles */
        .nav-item .fa-search {
            font-size: 1.0rem;
        }
        
        /* Tùy chỉnh navbar */
        .navbar-brand {
            font-size: {% if site_settings %}{{ site_settings.navbar_brand_size }}{% else %}18px{% endif %};
            font-weight: bold;
            letter-spacing: 1px;
        }
        .navbar-nav .nav-link {
            font-size: {% if site_settings %}{{ site_settings.navbar_link_size }}{% else %}14px{% endif %};
            font-weight: 500;
            margin: 0 10px;
            transition: color 0.3s;
            text-transform: uppercase;
        }
        .navbar-nav .nav-link:hover {
            color:rgb(223, 223, 223) !important;
        }
        /* Compact Staff Button */
        .staff-button {
            margin-left: 8px;
            margin-right: 6px;
        }
        
        .staff-button .nav-link,
        .staff-dropdown .nav-link {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 20px; /* Smaller radius */
            padding: 6px 16px !important; /* Much more compact */
            color: white !important;
            font-weight: 600;
            font-size: 12px; /* Smaller font */
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102,126,234,0.2); /* Smaller shadow */
            display: flex;
            align-items: center;
            text-decoration: none;
            margin: 0 4px; /* Minimal margin */
            white-space: nowrap; /* Prevent text wrapping */
        }
        
        .staff-button .nav-link i,
        .staff-dropdown .nav-link i {
            font-size: 12px; /* Smaller icon */
            margin-right: 4px; /* Reduced spacing */
        }
        
        .staff-button .nav-link:hover,
        .staff-dropdown .nav-link:hover {
            transform: translateY(-2px) scale(1.05); /* Reduced movement */
            box-shadow: 0 8px 20px rgba(102,126,234,0.3);
            background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
        }
        
        /* Dropdown for authenticated staff */
        .staff-dropdown {
            margin-left: 8px;
            margin-right: 6px;
        }
        
        .staff-dropdown .dropdown-menu {
            min-width: 180px;
            padding: 0.5rem 0;
            border: none;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            margin-top: 8px;
            background: white;
        }
        
        .staff-dropdown .dropdown-item {
            padding: 10px 16px;
            font-weight: 500;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }
        
        .staff-dropdown .dropdown-item:hover {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            color: #495057;
            padding-left: 20px;
        }
        
        .staff-dropdown .dropdown-item i {
            width: 14px;
            text-align: center;
        }
        
        /* Navbar Container Optimization */
        .modern-navbar .container {
            padding: 0 15px; /* Controlled container padding */
        }
        
        .modern-navbar .navbar-nav {
            align-items: center;
            gap: 4px; /* Minimal gap between items */
        }
        
        .modern-navbar .nav-item {
            margin: 0; /* Remove default margins */
        }
        
        /* Mobile Responsive - Extra Compact */
        @media (max-width: 991px) {
            .modern-navbar {
                padding: 8px 0;
            }
            
            .modern-navbar .navbar-brand {
                font-size: 18px;
                margin-right: 10px;
            }
            
            .modern-navbar .navbar-brand img {
                height: 28px;
            }
            
            .modern-navbar .nav-link {
                padding: 8px 16px !important;
                margin: 2px 0;
                text-align: center;
                border-radius: 15px;
            }
            
            .staff-button .nav-link,
            .staff-dropdown .nav-link {
                justify-content: center;
                margin: 8px 0;
                padding: 8px 20px !important;
            }
            
            .modern-search .search-dropdown {
                width: 250px;
                right: -30px;
            }
            
            .language-selector .nav-link {
                justify-content: center;
                padding: 8px 16px !important;
            }
        }
        
        @media (max-width: 576px) {
            .modern-navbar .navbar-brand {
                font-size: 16px;
            }
            
            .modern-navbar .navbar-brand img {
                height: 24px;
            }
            
            .modern-navbar .nav-link {
                font-size: 12px;
                padding: 6px 12px !important;
            }
            
            .staff-button .nav-link,
            .staff-dropdown .nav-link {
                font-size: 11px;
                padding: 6px 16px !important;
            }
        }
        
        /* Compact Language Selector */
        .language-selector {
            margin-left: 6px;
        }
        .language-selector .nav-link {
            background: linear-gradient(135deg, 
                rgba(255,255,255,0.15), 
                rgba(255,255,255,0.1));
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 18px; /* Smaller radius */
            padding: 6px 12px !important; /* Compact padding */
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            font-size: 12px; /* Smaller font */
            margin: 0 4px; /* Minimal margin */
            white-space: nowrap;
        }
        .language-selector .nav-link:hover {
            background: linear-gradient(135deg, 
                rgba(255,255,255,0.25), 
                rgba(255,255,255,0.15));
            transform: translateY(-2px); /* Reduced movement */
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .language-selector .flag-icon {
            width: 20px; /* Reduced size */
            height: 14px; /* Reduced size */
            margin-right: 6px; /* Reduced spacing */
            border-radius: 2px;
        }
        .language-selector:hover .flag-icon {
            transform: scale(1.1) rotate(3deg);
        }
        .language-selector .dropdown-menu {
            min-width: 140px;
            padding: 0.5rem 0;
            display: none;
        }
        .language-selector:hover .dropdown-menu {
            display: block;
        }
        .language-selector .dropdown-item {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            font-size: 12px;
        }
        .language-selector .dropdown-item:hover {
            background-color: #f8f9fa;
        }
        /* Dropdown styles */
        .dropdown:hover .dropdown-menu {
            display: block;
            margin-top: 0;
        }
        .dropdown-menu {
            border: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            animation: fadeIn 0.3s ease-in;
        }
        .dropdown-item {
            padding: 8px 20px;
            font-size: 1rem;
            transition: background-color 0.2s;
        }
        .dropdown-item:hover {
            background-color: #f8f9fa;
            color: #0d6efd;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Breadcrumb Styles */
        .breadcrumb-section {
            background: white;
            padding: 1rem 0;
            border-bottom: 1px solid #e2e8f0;
            margin-bottom: 2rem;
        }
        
        .breadcrumb {
            background: none;
            padding: 0;
            margin: 0;
            font-size: 0.9rem;
        }
        
        .breadcrumb-item a {
            color: #2563eb;
            text-decoration: none;
            transition: all 0.2s;
        }
        
        .breadcrumb-item a:hover {
            text-decoration: underline;
            color: #1d4ed8;
        }
        
        .breadcrumb-item.active {
            color: #64748b;
            font-weight: 500;
        }
        
        .breadcrumb-item + .breadcrumb-item::before {
            content: '›';
            color: #94a3b8;
            font-weight: 600;
        }
        
        /* Thông báo lỗi */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
        }
        
        .toast {
            max-width: 350px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            overflow: hidden;
            margin-bottom: 10px;
            display: none;
        }
        
        .toast.show {
            display: block;
            animation: fadeInRight 0.5s;
        }
        
        .toast-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 15px;
            background-color: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        
        .toast-body {
            padding: 12px 15px;
        }
        
        .toast-error {
            border-left: 4px solid #dc3545;
        }
        
        .toast-warning {
            border-left: 4px solid #ffc107;
        }
        
        .toast-success {
            border-left: 4px solid #28a745;
        }
        
        .toast-info {
            border-left: 4px solid #17a2b8;
        }
        
        @keyframes fadeInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
    </style>
    {% block extra_head %}{% endblock %}
</head>
<body>
    <!-- Toast Notifications Container -->
    <div class="toast-container" id="toastContainer">
        <!-- Toasts will be added here dynamically -->
    </div>
    
 <!-- Modern Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark modern-navbar" id="mainNavbar">
        <div class="container">
            <a class="navbar-brand" href="{% url "home" %}">
                {% if site_settings and site_settings.logo %}
                    <img src="{{ site_settings.logo.url }}" alt="{{ site_settings.company_name }} Logo" class="d-inline-block align-text-center me-2">
                {% else %}
                    <img src="https://i.imgur.com/QMfyRXg.png" alt="Hitech NDT Logo" class="d-inline-block align-text-center me-2">
                {% endif %}
                {% if site_settings %}{{ site_settings.company_name }}{% else %}Hitech NDT{% endif %}
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="{% url "home" %}" data-vi="Trang chủ" data-en="Home">Trang chủ</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url "about" %}" data-vi="Giới thiệu" data-en="About">Giới thiệu</a></li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="{% url "blog_list" %}" id="blogDropdown" role="button" data-bs-hover="dropdown" aria-expanded="false" data-vi="Bài viết" data-en="Blog">Bài viết</a>
                        <ul class="dropdown-menu" aria-labelledby="blogDropdown">
                            {% for category in categories %}
                                <li><a class="dropdown-item" href="/blog/{{ category.slug }}">{{ category.name }}</a></li>
                            {% endfor %}
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="{% url "course_list" %}" id="courseDropdown" role="button" data-bs-hover="dropdown" aria-expanded="false" data-vi="Chứng chỉ" data-en="Certificates">Chứng chỉ</a>
                        <ul class="dropdown-menu" aria-labelledby="courseDropdown">
                            {% for category in course_categories %}
                                <li><a class="dropdown-item" href="/khoa-hoc/{{ category.slug }}">
                                    {% if category.icon %}<i class="{{ category.icon }} me-2"></i>{% endif %}
                                    {{ category.name }}
                                </a></li>
                            {% endfor %}
                        </ul>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="{% url "contact" %}" data-vi="Liên hệ" data-en="Contact">Liên hệ</a></li>
                    
                    <li class="nav-item modern-search position-relative">
                        <a class="nav-link" href="#" id="searchToggle">
                            <i class="fas fa-search"></i>
                        </a>
                        <div id="searchDropdown" class="search-dropdown">
                            <form action="{% url "search_results" %}" method="get">
                                <div class="input-group">
                                    <input type="text" class="form-control" name="q" placeholder="Nhập từ khóa tìm kiếm..." required>
                                    <button class="btn btn-primary" type="submit">
                                        <i class="fas fa-search"></i>
                                    </button>
                                </div>
                            </form>
                        </div>
                    </li>
                    
                    <!-- Enhanced Staff Button -->
                    {% if user.is_authenticated and user.is_staff %}
                        <li class="nav-item dropdown staff-dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="staffDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-user-shield me-2"></i>{{ user.username|truncatechars:10 }}
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="staffDropdown">
                                <li><a class="dropdown-item" href="{% url 'staff_dashboard' %}"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                                {% if user.is_superuser %}
                                    <li><a class="dropdown-item" href="/admin/"><i class="fas fa-cog"></i> Quản trị</a></li>
                                {% endif %}
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="{% url 'staff_logout' %}"><i class="fas fa-sign-out-alt text-danger"></i> Đăng xuất</a></li>
                            </ul>
                        </li>
                    {% else %}
                        <li class="nav-item staff-button">
                            <a class="nav-link" href="{% url 'staff_login' %}">
                                <i class="fas fa-user-shield me-2"></i>Đăng nhập
                            </a>
                        </li>
                    {% endif %}
                    
                    <li class="nav-item dropdown language-selector">
                        <a class="nav-link" href="#" id="languageDropdown" role="button" data-bs-hover="dropdown" aria-expanded="false">
                            <img src="{% static 'images/flags/vietnam.svg' %}" alt="VI" class="flag-icon"> VI
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="languageDropdown">
                            <li><a class="dropdown-item" href="#" data-lang="vi"><img src="{% static 'images/flags/vietnam.svg' %}" alt="VI" class="flag-icon">Tiếng Việt</a></li>
                            <li><a class="dropdown-item" href="#" data-lang="en"><img src="{% static 'images/flags/usa.svg' %}" alt="EN" class="flag-icon">English</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <!-- Main Content -->
    <div class="container mt-4">
    <style>
        .scroll-to-top {
            width: 48px;
            height: 48px;
            position: fixed;
            right: 50px;
            bottom: 20%;  /* Adjust this value to lower the button */
            visibility: hidden;
            background-color: #5e5e5e;
            color: #fff;
            border: none;
            border-radius: 5px;
            padding: 10px;
            cursor: pointer;
            z-index: 1000;
        }
        
        .scroll-to-top.visible {
            opacity: 1;
            visibility: visible;
        }
        
        .scroll-to-top:hover {
            background-color: #0056b3;
            transform: translateY(-3px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        
        .scroll-to-top i {
            font-size: 20px;
        }
        </style>
        {% block content %}{% endblock %}
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Navbar scroll effect
            const navbar = document.getElementById('mainNavbar');
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
            });
            
            // Enhanced search functionality
            const searchToggle = document.getElementById('searchToggle');
            const searchDropdown = document.getElementById('searchDropdown');
            
            searchToggle.addEventListener('click', function(e) {
                e.preventDefault();
                searchDropdown.classList.toggle('show');
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!searchToggle.contains(e.target) && !searchDropdown.contains(e.target)) {
                    searchDropdown.classList.remove('show');
                }
            });
            
            // Smooth scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
            
            // Intersection Observer for animations
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animationDelay = '0.2s';
                        entry.target.style.animationFillMode = 'both';
                    }
                });
            }, observerOptions);
            
            // Observe footer elements
            document.querySelectorAll('.footer-section').forEach(el => {
                observer.observe(el);
            });
            
            // Language switching with enhanced effects
            const languageLinks = document.querySelectorAll('[data-lang]');
            languageLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const lang = this.getAttribute('data-lang');
                    localStorage.setItem('preferredLanguage', lang);
                    
                    // Add transition effect
                    document.body.style.transition = 'opacity 0.3s ease';
                    document.body.style.opacity = '0.8';
                    
                    setTimeout(() => {
                        // Update all text elements
                        document.querySelectorAll('[data-vi]').forEach(el => {
                            if (el.dataset[lang]) {
                                el.textContent = el.dataset[lang];
                            }
                        });
                        
                        // Update page language
                        document.documentElement.lang = lang;
                        
                        // Restore opacity
                        document.body.style.opacity = '1';
                    }, 150);
                });
            });
            
            // Set initial language
            const preferredLanguage = localStorage.getItem('preferredLanguage') || 'vi';
            if (preferredLanguage === 'en') {
                document.documentElement.lang = 'en';
                document.querySelectorAll('[data-vi]').forEach(el => {
                    if (el.dataset.en) {
                        el.textContent = el.dataset.en;
                    }
                });
            }
        });
    </script>

    <!-- Modern Footer -->
    <footer class="modern-footer">
        <div class="container">
            <div class="row g-4 footer-section">
                <!-- Company Info -->
                <div class="col-lg-4 col-md-6">
                    <div class="mb-4">
                        {% if site_settings and site_settings.logo %}
                            <img src="{{ site_settings.logo.url }}" alt="{{ site_settings.company_name }} Logo" height="50" class="mb-3 footer-logo floating">
                        {% else %}
                            <img src="https://i.imgur.com/QMfyRXg.png" alt="Hitech NDT Logo" height="50" class="mb-3 footer-logo floating">
                        {% endif %}
                        <p class="mb-3" style="color: rgba(255,255,255,0.9); line-height: 1.6;" data-vi="{% if site_settings %}{{ site_settings.company_description }}{% else %}Hitech NDT tự hào là đơn vị hàng đầu trong lĩnh vực kiểm tra không phá hủy và đào tạo chứng chỉ NDT tại Việt Nam{% endif %}" data-en="{% if site_settings %}{{ site_settings.company_description }}{% else %}Hitech NDT is proud to be the leading unit in non-destructive testing and NDT certification training in Vietnam{% endif %}">{% if site_settings %}{{ site_settings.company_description }}{% else %}Hitech NDT tự hào là đơn vị hàng đầu trong lĩnh vực kiểm tra không phá hủy và đào tạo chứng chỉ NDT tại Việt Nam{% endif %}</p>
                    </div>
                </div>
                
                <!-- Quick Links -->
                <div class="col-lg-2 col-md-6">
                    <h5 data-vi="Liên kết nhanh" data-en="Quick Links">Liên kết nhanh</h5>
                    <ul class="footer-links">
                        <li><a href="{% url 'home' %}" data-vi="Trang chủ" data-en="Home">Trang chủ</a></li>
                        <li><a href="{% url 'about' %}" data-vi="Giới thiệu" data-en="About">Giới thiệu</a></li>
                        <li><a href="{% url 'blog_list' %}" data-vi="Bài viết" data-en="Blog">Bài viết</a></li>
                        <li><a href="{% url 'course_list' %}" data-vi="Chứng chỉ" data-en="Certificates">Chứng chỉ</a></li>
                        <li><a href="{% url 'contact' %}" data-vi="Liên hệ" data-en="Contact">Liên hệ</a></li>
                    </ul>
                </div>
                
                <!-- Contact Info -->
                <div class="col-lg-3 col-md-6">
                    <h5 data-vi="Thông tin liên hệ" data-en="Contact Info">Thông tin liên hệ</h5>
                    <div class="footer-contact-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>123 Đường ABC, Quận XYZ, TP.HCM</span>
                </div>
                <div class="footer-contact-item">
                    <i class="fas fa-phone"></i>
                    <a href="tel:{% if site_settings %}{{ site_settings.footer_phone }}{% else %}+84123456789{% endif %}" style="color: rgba(255,255,255,0.9);">{% if site_settings %}{{ site_settings.footer_phone }}{% else %}+84 123 456 789{% endif %}</a>
                </div>
                <div class="footer-contact-item">
                    <i class="fas fa-envelope"></i>
                    <a href="mailto:{% if site_settings %}{{ site_settings.footer_email }}{% else %}info@hitechndt.com{% endif %}" style="color: rgba(255,255,255,0.9);">{% if site_settings %}{{ site_settings.footer_email }}{% else %}info@hitechndt.com{% endif %}</a>
                </div>
                </div>
                
                <!-- Social Media -->
                <div class="col-lg-3 col-md-6">
                    <h5 data-vi="Kết nối với chúng tôi" data-en="Connect With Us">Kết nối với chúng tôi</h5>
                    <div class="social-links">
                        {% if site_settings and site_settings.facebook_url %}
                            <a href="{{ site_settings.facebook_url }}" class="social-icon"><i class="fab fa-facebook"></i></a>
                        {% else %}
                            <a href="#" class="social-icon"><i class="fab fa-facebook"></i></a>
                        {% endif %}
                        {% if site_settings and site_settings.linkedin_url %}
                            <a href="{{ site_settings.linkedin_url }}" class="social-icon"><i class="fab fa-linkedin"></i></a>
                        {% else %}
                            <a href="#" class="social-icon"><i class="fab fa-linkedin"></i></a>
                        {% endif %}
                        {% if site_settings and site_settings.youtube_url %}
                            <a href="{{ site_settings.youtube_url }}" class="social-icon"><i class="fab fa-youtube"></i></a>
                        {% else %}
                            <a href="#" class="social-icon"><i class="fab fa-youtube"></i></a>
                        {% endif %}
                        {% if site_settings and site_settings.twitter_url %}
                            <a href="{{ site_settings.twitter_url }}" class="social-icon"><i class="fab fa-twitter"></i></a>
                        {% else %}
                            <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <!-- Copyright -->
            <div class="copyright-section">
                <p data-vi="&copy; 2025 {% if site_settings %}{{ site_settings.company_name }} - {{ site_settings.company_slogan }}{% else %}Hitech NDT - Giải pháp công nghệ hàng đầu{% endif %}" data-en="&copy; 2025 {% if site_settings %}{{ site_settings.company_name }} - {{ site_settings.company_slogan }}{% else %}Hitech NDT - Leading technology solutions{% endif %}">&copy; 2025 {% if site_settings %}{{ site_settings.company_name }} - {{ site_settings.company_slogan }}{% else %}Hitech NDT - Giải pháp công nghệ hàng đầu{% endif %}</p>
            </div>
        </div>
    </footer>

    <style>
    /* Ultra Modern Footer Styles */
    .modern-footer {
        background: linear-gradient(135deg, 
            #0f2027 0%, 
            #203a43 25%, 
            #2c5364 50%, 
            #203a43 75%, 
            #0f2027 100%);
        position: relative;
        overflow: hidden;
        padding: 60px 0 20px;
    }
    
    .modern-footer::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: 
            radial-gradient(circle at 20% 50%, rgba(0, 212, 255, 0.1) 0%, transparent 50%),
            radial-gradient(circle at 80% 20%, rgba(102, 126, 234, 0.1) 0%, transparent 50%),
            radial-gradient(circle at 40% 80%, rgba(118, 75, 162, 0.1) 0%, transparent 50%);
        animation: footerGlow 8s ease-in-out infinite alternate;
    }
    
    @keyframes footerGlow {
        0% { opacity: 0.5; }
        100% { opacity: 1; }
    }
    
    .modern-footer::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, 
            transparent, 
            rgba(0, 212, 255, 0.5), 
            rgba(102, 126, 234, 0.5), 
            rgba(0, 212, 255, 0.5), 
            transparent);
        animation: topBorderGlow 3s ease-in-out infinite;
    }
    
    @keyframes topBorderGlow {
        0%, 100% { opacity: 0.5; }
        50% { opacity: 1; }
    }
    
    .modern-footer .container {
        position: relative;
        z-index: 2;
    }
    
    .footer-section {
        padding: 40px 0;
    }
    
    .modern-footer h5 {
        color: #fff;
        font-weight: 600;
        margin-bottom: 12px;
        position: relative;
        font-size: 15px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        line-height: 1.2;
    }
    
    .modern-footer h5::after {
        content: '';
        position: absolute;
        bottom: -8px;
        left: 0;
        width: 50px;
        height: 3px;
        background: linear-gradient(90deg, #00d4ff, #0066ff);
        border-radius: 2px;
        animation: underlineGlow 2s ease-in-out infinite alternate;
    }
    
    @keyframes underlineGlow {
        0% { box-shadow: 0 0 5px rgba(0, 212, 255, 0.5); }
        100% { box-shadow: 0 0 15px rgba(0, 212, 255, 0.8); }
    }
    
    /* Enhanced Footer Logo */
    .footer-logo {
        filter: drop-shadow(0 4px 15px rgba(0, 212, 255, 0.3)) brightness(1.1);
        transition: all 0.4s ease;
    }
    
    .footer-logo.floating {
        animation: logoFloat 3s ease-in-out infinite;
    }
    
    @keyframes logoFloat {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-8px) rotate(2deg); }
    }
    
    .footer-logo:hover {
        transform: scale(1.1) rotate(5deg);
        filter: drop-shadow(0 8px 25px rgba(0, 212, 255, 0.5)) brightness(1.3);
    }
    
    /* Premium Footer Links */
    .footer-links {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    
    .footer-links li {
        margin-bottom: 12px;
        position: relative;
    }
    
    .footer-links a {
        color: rgba(255,255,255,0.8);
        text-decoration: none;
        transition: all 0.4s ease;
        position: relative;
        padding: 8px 0;
        display: inline-block;
        font-weight: 500;
    }
    
    .footer-links a::before {
        content: '';
        position: absolute;
        top: 50%;
        left: -15px;
        width: 0;
        height: 2px;
        background: linear-gradient(90deg, #00d4ff, #0066ff);
        transition: width 0.4s ease;
        transform: translateY(-50%);
        border-radius: 1px;
    }
    
    .footer-links a:hover::before {
        width: 10px;
    }
    
    .footer-links a:hover {
        color: #00d4ff;
        transform: translateX(15px);
        text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
    }
    
    /* Contact Info */
    .footer-contact-item {
        display: flex;
        align-items: center;
        margin-bottom: 8px;
        padding: 4px 0;
        transition: all 0.3s ease;
        border-radius: 8px;
    }
    
    .footer-contact-item:hover {
        background: rgba(0, 212, 255, 0.1);
        transform: translateX(5px);
        padding-left: 12px;
    }
    
    .footer-contact-item i {
        width: 16px;
        margin-right: 8px;
        color: #00d4ff;
        font-size: 14px;
        transition: all 0.3s ease;
        flex-shrink: 0;
    }
    
    .footer-contact-item:hover i {
        color: #fff;
        transform: scale(1.2);
        text-shadow: 0 0 8px rgba(0, 212, 255, 0.6);
    }
    
    .footer-contact-item span,
    .footer-contact-item a {
        color: rgba(255,255,255,0.9);
        transition: all 0.3s ease;
        font-weight: 500;
        font-size: 13px;
        line-height: 1.2;
    }
    
    .footer-contact-item:hover span,
    .footer-contact-item:hover a {
        color: #fff;
        text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
    }
    
    /* Footer Section Spacing */
    .col-lg-3.col-md-6 {
        padding-left: 15px;
        padding-right: 15px;
    }
    
    /* Ultra Premium Social Links */
    .social-links {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        margin-top: 20px;
    }
    
    .social-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, 
            rgba(0, 212, 255, 0.2), 
            rgba(102, 126, 234, 0.2));
        border: 2px solid rgba(255,255,255,0.2);
        border-radius: 50%;
        color: rgba(255,255,255,0.9);
        text-decoration: none;
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        backdrop-filter: blur(10px);
    }
    
    .social-icon::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #00d4ff, #0066ff);
        border-radius: 50%;
        transform: scale(0);
        transition: transform 0.5s ease;
    }
    
    .social-icon i {
        position: relative;
        z-index: 2;
        font-size: 20px;
        transition: all 0.3s ease;
    }
    
    .social-icon:hover::before {
        transform: scale(1);
    }
    
    .social-icon:hover {
        transform: translateY(-8px) scale(1.1) rotate(360deg);
        box-shadow: 
            0 15px 30px rgba(0, 212, 255, 0.4),
            0 0 0 3px rgba(255,255,255,0.3) inset;
        border-color: rgba(255,255,255,0.5);
    }
    
    .social-icon:hover i {
        color: #fff;
        transform: scale(1.2);
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
    }
    
    /* Specific social media colors on hover */
    .social-icon:nth-child(1):hover::before { /* Facebook */
        background: linear-gradient(135deg, #1877f2, #42a5f5);
    }
    
    .social-icon:nth-child(2):hover::before { /* LinkedIn */
        background: linear-gradient(135deg, #0077b5, #00a0dc);
    }
    
    .social-icon:nth-child(3):hover::before { /* YouTube */
        background: linear-gradient(135deg, #ff0000, #ff4444);
    }
    
    .social-icon:nth-child(4):hover::before { /* Twitter */
        background: linear-gradient(135deg, #1da1f2, #1e88e5);
    }
    
    /* Enhanced Copyright Section */
    .copyright-section {
        margin-top: 40px;
        padding-top: 30px;
        border-top: 1px solid rgba(255,255,255,0.1);
        text-align: center;
        position: relative;
    }
    
    .copyright-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 50%;
        width: 100px;
        height: 1px;
        background: linear-gradient(90deg, 
            transparent, 
            rgba(0, 212, 255, 0.8), 
            transparent);
        transform: translateX(-50%);
        animation: copyrightGlow 2s ease-in-out infinite alternate;
    }
    
    @keyframes copyrightGlow {
        0% { width: 100px; opacity: 0.5; }
        100% { width: 200px; opacity: 1; }
    }
    
    .copyright-section p {
        color: rgba(255,255,255,0.7);
        margin: 0;
        font-size: 14px;
        font-weight: 500;
        letter-spacing: 0.5px;
        transition: all 0.3s ease;
    }
    
    .copyright-section p:hover {
        color: rgba(255,255,255,0.9);
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
    }
    
    /* Responsive Footer */
    @media (max-width: 768px) {
            .modern-footer {
                padding: 40px 0 20px;
            }
            
            .footer-section {
                padding: 20px 0;
            }
            
            .modern-footer h5 {
                font-size: 15px;
                margin-bottom: 18px;
                text-align: center;
            }
            
            .modern-footer h5::after {
                left: 50%;
                transform: translateX(-50%);
            }
            
            .social-links {
                justify-content: center;
            }
            
            .social-icon {
                width: 45px;
                height: 45px;
            }
            
            .social-icon i {
                font-size: 18px;
            }
            
            .copyright-section {
                text-align: center;
                margin-top: 30px;
            }
            
            .copyright-section::before {
                left: 50%;
                transform: translateX(-50%);
            }
            
            .footer-links {
                text-align: center;
            }
            
            .footer-links {
                margin-bottom: 8px;
            }
            
            .footer-contact-item {
                margin-bottom: 1px !important;
                padding: 0 !important;
                min-height: unset !important;
                max-height: unset !important;
                height: fit-content !important;
                display: flex !important;
                align-items: center !important;
                border-radius: 0 !important;
            }
            
            .footer-contact-item:hover {
                background: rgba(0, 212, 255, 0.1);
                transform: translateX(5px);
                padding-left: 12px;
            }
            
            .footer-contact-item i {
                width: 12px !important;
                margin-right: 6px !important;
                font-size: 12px !important;
                flex-shrink: 0 !important;
            }
            
            .footer-contact-item span,
            .footer-contact-item a {
                font-size: 12px !important;
                line-height: 1 !important;
                margin: 0 !important;
                padding: 0 !important;
                display: inline-block !important;
            }
            
            .modern-footer h5 {
                font-size: 14px;
                margin-bottom: 12px;
            }
        }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Script để ẩn/hiện navbar khi cuộn
        let prevScrollpos = window.pageYOffset;
        const navbar = document.querySelector('.navbar');
        
        // Thêm class để navbar có thể chuyển đổi mượt mà
        navbar.style.transition = "top 0.3s";
        navbar.style.position = "fixed";
        navbar.style.width = "100%";
        navbar.style.top = "0";
        navbar.style.zIndex = "1000";
        
        // Thêm padding cho body để tránh nội dung bị đẩy lên khi navbar fixed
        document.body.style.paddingTop = navbar.offsetHeight + "px";
        
        window.onscroll = function() {
            let currentScrollPos = window.pageYOffset;
            
            // Ẩn navbar khi cuộn xuống, hiện khi cuộn lên
            if (prevScrollpos > currentScrollPos) {
                navbar.style.top = "0";
            } else {
                navbar.style.top = -navbar.offsetHeight + "px";
            }
            
            prevScrollpos = currentScrollPos;
        }
    
        // Script để set màu cho avatar letter
        document.querySelectorAll('.avatar-letter').forEach(avatar => {
            const color = avatar.dataset.color;
            avatar.style.setProperty('--color', color);
        });
    </script>

    <button class="scroll-to-top">
        <i class="fas fa-chevron-up"></i>
    </button>

    <script>
        // Script to control the scroll-to-top button
        const scrollToTopBtn = document.querySelector('.scroll-to-top');

        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                scrollToTopBtn.classList.add('visible');
            } else {
                scrollToTopBtn.classList.remove('visible');
            }
        });

        scrollToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    </script>
</body>
</body>
</html>
<!-- Zalo Logo và Menu Chat -->
<div id="zalo-chat-widget" style="display: none; position: fixed; bottom: 10%; right: 120px; width: 300px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000;">
    <div style="padding: 15px; background: #0068ff; color: white; border-radius: 10px 10px 0 0; display: flex; justify-content: space-between; align-items: center;">
        <span style="font-weight: bold;">Chat với chúng tôi</span>
        <span onclick="closeZaloChat()" style="cursor: pointer;">✕</span>
    </div>
    <div style="padding: 20px;">
        <div style="text-align: center; margin-bottom: 20px;">
            <img src="/static/image/Icon_of_Zalo.png" alt="Zalo Logo" style="width: 50px; height: 50px; margin-bottom: 10px;">
            <p style="margin: 0;">Chào bạn!</p>
            <p style="margin: 5px 0;">Chọn phương thức chat:</p>
        </div>
        
        <!-- Hai nút chat -->
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <a href="https://zalo.me/0369617913" target="_blank" style="display: block; background: #0068ff; color: white; text-decoration: none; padding: 12px; border-radius: 5px; text-align: center;">
                <i class="fab fa-facebook-messenger" style="margin-right: 8px;"></i>
                Chat qua Zalo
            </a>
            
            <button onclick="openQuickChat()" style="background: #28a745; color: white; border: none; padding: 12px; border-radius: 5px; cursor: pointer;">
                <i class="fas fa-comments" style="margin-right: 8px;"></i>
                Chat với Admin
            </button>
        </div>
    </div>
</div>

<!-- Cửa sổ Quick Chat -->
<div id="quick-chat-window" style="display: none; position: fixed; bottom: 10%; right: 120px; width: 300px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000;">
    <div style="padding: 15px; background: #28a745; color: white; border-radius: 10px 10px 0 0; display: flex; justify-content: space-between; align-items: center;">
        <span style="font-weight: bold;">Chat với Admin</span>
        <span onclick="closeQuickChat()" style="cursor: pointer;">✕</span>
    </div>
    <div style="padding: 20px; height: 300px; display: flex; flex-direction: column;">
        <div id="chat-messages" style="flex-grow: 1; overflow-y: auto; margin-bottom: 10px;">
            <!-- Tin nhắn sẽ được thêm vào đây -->
            <div style="text-align: center; color: #666; margin: 10px 0;">Bắt đầu cuộc trò chuyện</div>
        </div>
        <div style="display: flex; gap: 10px;">
            <input type="text" id="quick-chat-input" placeholder="Nhập tin nhắn..." style="flex-grow: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <button onclick="sendQuickMessage()" style="background: #28a745; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">
                Gửi
            </button>
        </div>
    </div>
</div>

<div id="zalo-logo" onclick="toggleZaloChat()" style="cursor: pointer;">
    <img src="/static/image/Icon_of_Zalo.png" alt="Zalo Logo" style="width: 50px; height: 50px; position: fixed; bottom: 10%; right: 50px;">
</div>

<script>
function toggleZaloChat() {
    var widget = document.getElementById('zalo-chat-widget');
    var quickChat = document.getElementById('quick-chat-window');
    if (widget.style.display === 'none') {
        widget.style.display = 'block';
        quickChat.style.display = 'none';
    } else {
        widget.style.display = 'none';
    }
}

function closeZaloChat() {
    document.getElementById('zalo-chat-widget').style.display = 'none';
}

function openQuickChat() {
    document.getElementById('zalo-chat-widget').style.display = 'none';
    document.getElementById('quick-chat-window').style.display = 'block';
}

function closeQuickChat() {
    document.getElementById('quick-chat-window').style.display = 'none';
}

function sendQuickMessage() {
    var input = document.getElementById('quick-chat-input');
    var message = input.value.trim();
    
    if (message) {
        var messagesDiv = document.getElementById('chat-messages');
        var messageElement = document.createElement('div');
        messageElement.style.cssText = 'background: #e9ecef; padding: 8px; border-radius: 4px; margin: 5px 0; align-self: flex-end;';
        messageElement.textContent = message;
        
        messagesDiv.appendChild(messageElement);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
        input.value = '';
        
        // Thêm phản hồi tự động từ admin (có thể thay thế bằng logic backend thực tế)
        setTimeout(() => {
            var adminResponse = document.createElement('div');
            adminResponse.style.cssText = 'background: #28a745; color: white; padding: 8px; border-radius: 4px; margin: 5px 0; align-self: flex-start;';
            adminResponse.textContent = 'Cảm ơn bạn đã liên hệ. Chúng tôi sẽ phản hồi sớm nhất có thể!';
            messagesDiv.appendChild(adminResponse);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }, 1000);
    }
}
</script>

<script>
// Function để hiển thị toast notification
function showToast(message, type = 'error') {
    const toastContainer = document.getElementById('toastContainer');
    
    const toast = document.createElement('div');
    toast.className = 'toast';
    
    const toastHeader = document.createElement('div');
    toastHeader.className = 'toast-header';
    
    const icon = type === 'error' ? '❌' : '✅';
    const title = type === 'error' ? 'Lỗi' : 'Thành công';
    
    toastHeader.innerHTML = `
        <span style="margin-right: 10px;">${icon}</span>
        <strong>${title}</strong>
        <button type="button" class="btn-close" onclick="closeToast(this)" style="background: none; border: none; font-size: 18px; margin-left: auto; cursor: pointer;">×</button>
    `;
    
    const toastBody = document.createElement('div');
    toastBody.className = 'toast-body';
    toastBody.textContent = message;
    
    toast.appendChild(toastHeader);
    toast.appendChild(toastBody);
    toastContainer.appendChild(toast);
    
    // Hiển thị toast
    setTimeout(() => {
        toast.classList.add('show');
    }, 100);
    
    // Tự động ẩn sau 5 giây
    setTimeout(() => {
        closeToast(toast.querySelector('.btn-close'));
    }, 5000);
}

function closeToast(button) {
    const toast = button.closest('.toast');
    toast.style.animation = 'fadeOutRight 0.5s';
    setTimeout(() => {
        toast.remove();
    }, 500);
}

// Kiểm tra khi click vào Dashboard link
document.addEventListener('DOMContentLoaded', function() {
    const dashboardLink = document.querySelector('a[href*="staff_dashboard"]');
    if (dashboardLink) {
        dashboardLink.addEventListener('click', function(e) {
            // Kiểm tra nếu user chưa có quyền truy cập
            {% if not user.is_authenticated or not user.is_staff %}
                e.preventDefault();
                showToast('Tài khoản chưa được cấu hình đầy đủ hoặc không có quyền truy cập Dashboard!', 'error');
            {% elif user.is_authenticated and not user.userprofile %}
                e.preventDefault();
                showToast('Tài khoản chưa có profile. Vui lòng liên hệ admin để được cấu hình!', 'error');
            {% endif %}
        });
    }
    
    // Hiển thị thông báo từ Django messages framework
    {% if messages %}
        {% for message in messages %}
            showToast('{{ message }}', '{% if message.tags == "error" %}error{% else %}success{% endif %}');
        {% endfor %}
    {% endif %}
});

// CSS animation cho fadeOutRight
const style = document.createElement('style');
style.textContent = `
    @keyframes fadeOutRight {
        from { opacity: 1; transform: translateX(0); }
        to { opacity: 0; transform: translateX(100%); }
    }
    @keyframes fadeInRight {
        from { opacity: 0; transform: translateX(100%); }
        to { opacity: 1; transform: translateX(0); }
    }
`;
document.head.appendChild(style);
</script>
</body>
</html>
<!-- Zalo Logo và Menu Chat -->
<div id="zalo-chat-widget" style="display: none; position: fixed; bottom: 10%; right: 120px; width: 300px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000;">
    <div style="padding: 15px; background: #0068ff; color: white; border-radius: 10px 10px 0 0; display: flex; justify-content: space-between; align-items: center;">
        <span style="font-weight: bold;">Chat với chúng tôi</span>
        <span onclick="closeZaloChat()" style="cursor: pointer;">✕</span>
    </div>
    <div style="padding: 20px;">
        <div style="text-align: center; margin-bottom: 20px;">
            <img src="/static/image/Icon_of_Zalo.png" alt="Zalo Logo" style="width: 50px; height: 50px; margin-bottom: 10px;">
            <p style="margin: 0;">Chào bạn!</p>
            <p style="margin: 5px 0;">Chọn phương thức chat:</p>
        </div>
        
        <!-- Hai nút chat -->
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <a href="https://zalo.me/0369617913" target="_blank" style="display: block; background: #0068ff; color: white; text-decoration: none; padding: 12px; border-radius: 5px; text-align: center;">
                <i class="fab fa-facebook-messenger" style="margin-right: 8px;"></i>
                Chat qua Zalo
            </a>
            
            <button onclick="openQuickChat()" style="background: #28a745; color: white; border: none; padding: 12px; border-radius: 5px; cursor: pointer;">
                <i class="fas fa-comments" style="margin-right: 8px;"></i>
                Chat với Admin
            </button>
        </div>
    </div>
</div>

<!-- Cửa sổ Quick Chat -->
<div id="quick-chat-window" style="display: none; position: fixed; bottom: 10%; right: 120px; width: 300px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000;">
    <div style="padding: 15px; background: #28a745; color: white; border-radius: 10px 10px 0 0; display: flex; justify-content: space-between; align-items: center;">
        <span style="font-weight: bold;">Chat với Admin</span>
        <span onclick="closeQuickChat()" style="cursor: pointer;">✕</span>
    </div>
    <div style="padding: 20px; height: 300px; display: flex; flex-direction: column;">
        <div id="chat-messages" style="flex-grow: 1; overflow-y: auto; margin-bottom: 10px;">
            <!-- Tin nhắn sẽ được thêm vào đây -->
            <div style="text-align: center; color: #666; margin: 10px 0;">Bắt đầu cuộc trò chuyện</div>
        </div>
        <div style="display: flex; gap: 10px;">
            <input type="text" id="quick-chat-input" placeholder="Nhập tin nhắn..." style="flex-grow: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <button onclick="sendQuickMessage()" style="background: #28a745; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">
                Gửi
            </button>
        </div>
    </div>
</div>

<div id="zalo-logo" onclick="toggleZaloChat()" style="cursor: pointer;">
    <img src="/static/image/Icon_of_Zalo.png" alt="Zalo Logo" style="width: 50px; height: 50px; position: fixed; bottom: 10%; right: 50px;">
</div>

<script>
function toggleZaloChat() {
    var widget = document.getElementById('zalo-chat-widget');
    var quickChat = document.getElementById('quick-chat-window');
    if (widget.style.display === 'none') {
        widget.style.display = 'block';
        quickChat.style.display = 'none';
    } else {
        widget.style.display = 'none';
    }
}

function closeZaloChat() {
    document.getElementById('zalo-chat-widget').style.display = 'none';
}

function openQuickChat() {
    document.getElementById('zalo-chat-widget').style.display = 'none';
    document.getElementById('quick-chat-window').style.display = 'block';
}

function closeQuickChat() {
    document.getElementById('quick-chat-window').style.display = 'none';
}

function sendQuickMessage() {
    var input = document.getElementById('quick-chat-input');
    var message = input.value.trim();
    
    if (message) {
        var messagesDiv = document.getElementById('chat-messages');
        var messageElement = document.createElement('div');
        messageElement.style.cssText = 'background: #e9ecef; padding: 8px; border-radius: 4px; margin: 5px 0; align-self: flex-end;';
        messageElement.textContent = message;
        
        messagesDiv.appendChild(messageElement);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
        input.value = '';
        
        // Thêm phản hồi tự động từ admin (có thể thay thế bằng logic backend thực tế)
        setTimeout(() => {
            var adminResponse = document.createElement('div');
            adminResponse.style.cssText = 'background: #28a745; color: white; padding: 8px; border-radius: 4px; margin: 5px 0; align-self: flex-start;';
            adminResponse.textContent = 'Cảm ơn bạn đã liên hệ. Chúng tôi sẽ phản hồi sớm nhất có thể!';
            messagesDiv.appendChild(adminResponse);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }, 1000);
    }
}
</script>

<script>
// Function để hiển thị toast notification
function showToast(message, type = 'error') {
    const toastContainer = document.getElementById('toastContainer');
    
    const toast = document.createElement('div');
    toast.className = 'toast';
    
    const toastHeader = document.createElement('div');
    toastHeader.className = 'toast-header';
    
    const icon = type === 'error' ? '❌' : '✅';
    const title = type === 'error' ? 'Lỗi' : 'Thành công';
    
    toastHeader.innerHTML = `
        <span style="margin-right: 10px;">${icon}</span>
        <strong>${title}</strong>
        <button type="button" class="btn-close" onclick="closeToast(this)" style="background: none; border: none; font-size: 18px; margin-left: auto; cursor: pointer;">×</button>
    `;
    
    const toastBody = document.createElement('div');
    toastBody.className = 'toast-body';
    toastBody.textContent = message;
    
    toast.appendChild(toastHeader);
    toast.appendChild(toastBody);
    toastContainer.appendChild(toast);
    
    // Hiển thị toast
    setTimeout(() => {
        toast.classList.add('show');
    }, 100);
    
    // Tự động ẩn sau 5 giây
    setTimeout(() => {
        closeToast(toast.querySelector('.btn-close'));
    }, 5000);
}

function closeToast(button) {
    const toast = button.closest('.toast');
    toast.style.animation = 'fadeOutRight 0.5s';
    setTimeout(() => {
        toast.remove();
    }, 500);
}

// Kiểm tra khi click vào Dashboard link
document.addEventListener('DOMContentLoaded', function() {
    const dashboardLink = document.querySelector('a[href*="staff_dashboard"]');
    if (dashboardLink) {
        dashboardLink.addEventListener('click', function(e) {
            // Kiểm tra nếu user chưa có quyền truy cập
            {% if not user.is_authenticated or not user.is_staff %}
                e.preventDefault();
                showToast('Tài khoản chưa được cấu hình đầy đủ hoặc không có quyền truy cập Dashboard!', 'error');
            {% elif user.is_authenticated and not user.userprofile %}
                e.preventDefault();
                showToast('Tài khoản chưa có profile. Vui lòng liên hệ admin để được cấu hình!', 'error');
            {% endif %}
        });
    }
    
    // Hiển thị thông báo từ Django messages framework
    {% if messages %}
        {% for message in messages %}
            showToast('{{ message }}', '{% if message.tags == "error" %}error{% else %}success{% endif %}');
        {% endfor %}
    {% endif %}
});

// CSS animation cho fadeOutRight
const style = document.createElement('style');
style.textContent = `
    @keyframes fadeOutRight {
        from { opacity: 1; transform: translateX(0); }
        to { opacity: 0; transform: translateX(100%); }
    }
    @keyframes fadeInRight {
        from { opacity: 0; transform: translateX(100%); }
        to { opacity: 1; transform: translateX(0); }
    }
`;
document.head.appendChild(style);
</script>
</body>
</html>
<!-- Zalo Logo và Menu Chat -->
<div id="zalo-chat-widget" style="display: none; position: fixed; bottom: 10%; right: 120px; width: 300px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000;">
    <div style="padding: 15px; background: #0068ff; color: white; border-radius: 10px 10px 0 0; display: flex; justify-content: space-between; align-items: center;">
        <span style="font-weight: bold;">Chat với chúng tôi</span>
        <span onclick="closeZaloChat()" style="cursor: pointer;">✕</span>
    </div>
    <div style="padding: 20px;">
        <div style="text-align: center; margin-bottom: 20px;">
            <img src="/static/image/Icon_of_Zalo.png" alt="Zalo Logo" style="width: 50px; height: 50px; margin-bottom: 10px;">
            <p style="margin: 0;">Chào bạn!</p>
            <p style="margin: 5px 0;">Chọn phương thức chat:</p>
        </div>
        
        <!-- Hai nút chat -->
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <a href="https://zalo.me/0369617913" target="_blank" style="display: block; background: #0068ff; color: white; text-decoration: none; padding: 12px; border-radius: 5px; text-align: center;">
                <i class="fab fa-facebook-messenger" style="margin-right: 8px;"></i>
                Chat qua Zalo
            </a>
            
            <button onclick="openQuickChat()" style="background: #28a745; color: white; border: none; padding: 12px; border-radius: 5px; cursor: pointer;">
                <i class="fas fa-comments" style="margin-right: 8px;"></i>
                Chat với Admin
            </button>
        </div>
    </div>
</div>

<!-- Cửa sổ Quick Chat -->
<div id="quick-chat-window" style="display: none; position: fixed; bottom: 10%; right: 120px; width: 300px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000;">
    <div style="padding: 15px; background: #28a745; color: white; border-radius: 10px 10px 0 0; display: flex; justify-content: space-between; align-items: center;">
        <span style="font-weight: bold;">Chat với Admin</span>
        <span onclick="closeQuickChat()" style="cursor: pointer;">✕</span>
    </div>
    <div style="padding: 20px; height: 300px; display: flex; flex-direction: column;">
        <div id="chat-messages" style="flex-grow: 1; overflow-y: auto; margin-bottom: 10px;">
            <!-- Tin nhắn sẽ được thêm vào đây -->
            <div style="text-align: center; color: #666; margin: 10px 0;">Bắt đầu cuộc trò chuyện</div>
        </div>
        <div style="display: flex; gap: 10px;">
            <input type="text" id="quick-chat-input" placeholder="Nhập tin nhắn..." style="flex-grow: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <button onclick="sendQuickMessage()" style="background: #28a745; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">
                Gửi
            </button>
        </div>
    </div>
</div>

<div id="zalo-logo" onclick="toggleZaloChat()" style="cursor: pointer;">
    <img src="/static/image/Icon_of_Zalo.png" alt="Zalo Logo" style="width: 50px; height: 50px; position: fixed; bottom: 10%; right: 50px;">
</div>

<script>
function toggleZaloChat() {
    var widget = document.getElementById('zalo-chat-widget');
    var quickChat = document.getElementById('quick-chat-window');
    if (widget.style.display === 'none') {
        widget.style.display = 'block';
        quickChat.style.display = 'none';
    } else {
        widget.style.display = 'none';
    }
}

function closeZaloChat() {
    document.getElementById('zalo-chat-widget').style.display = 'none';
}

function openQuickChat() {
    document.getElementById('zalo-chat-widget').style.display = 'none';
    document.getElementById('quick-chat-window').style.display = 'block';
}

function closeQuickChat() {
    document.getElementById('quick-chat-window').style.display = 'none';
}

function sendQuickMessage() {
    var input = document.getElementById('quick-chat-input');
    var message = input.value.trim();
    
    if (message) {
        var messagesDiv = document.getElementById('chat-messages');
        var messageElement = document.createElement('div');
        messageElement.style.cssText = 'background: #e9ecef; padding: 8px; border-radius: 4px; margin: 5px 0; align-self: flex-end;';
        messageElement.textContent = message;
        
        messagesDiv.appendChild(messageElement);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
        input.value = '';
        
        // Thêm phản hồi tự động từ admin (có thể thay thế bằng logic backend thực tế)
        setTimeout(() => {
            var adminResponse = document.createElement('div');
            adminResponse.style.cssText = 'background: #28a745; color: white; padding: 8px; border-radius: 4px; margin: 5px 0; align-self: flex-start;';
            adminResponse.textContent = 'Cảm ơn bạn đã liên hệ. Chúng tôi sẽ phản hồi sớm nhất có thể!';
            messagesDiv.appendChild(adminResponse);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }, 1000);
    }
}
</script>

<script>
// Function để hiển thị toast notification
function showToast(message, type = 'error') {
    const toastContainer = document.getElementById('toastContainer');
    
    const toast = document.createElement('div');
    toast.className = 'toast';
    
    const toastHeader = document.createElement('div');
    toastHeader.className = 'toast-header';
    
    const icon = type === 'error' ? '❌' : '✅';
    const title = type === 'error' ? 'Lỗi' : 'Thành công';
    
    toastHeader.innerHTML = `
        <span style="margin-right: 10px;">${icon}</span>
        <strong>${title}</strong>
        <button type="button" class="btn-close" onclick="closeToast(this)" style="background: none; border: none; font-size: 18px; margin-left: auto; cursor: pointer;">×</button>
    `;
    
    const toastBody = document.createElement('div');
    toastBody.className = 'toast-body';
    toastBody.textContent = message;
    
    toast.appendChild(toastHeader);
    toast.appendChild(toastBody);
    toastContainer.appendChild(toast);
    
    // Hiển thị toast
    setTimeout(() => {
        toast.classList.add('show');
    }, 100);
    
    // Tự động ẩn sau 5 giây
    setTimeout(() => {
        closeToast(toast.querySelector('.btn-close'));
    }, 5000);
}

function closeToast(button) {
    const toast = button.closest('.toast');
    toast.style.animation = 'fadeOutRight 0.5s';
    setTimeout(() => {
        toast.remove();
    }, 500);
}

// Kiểm tra khi click vào Dashboard link
document.addEventListener('DOMContentLoaded', function() {
    const dashboardLink = document.querySelector('a[href*="staff_dashboard"]');
    if (dashboardLink) {
        dashboardLink.addEventListener('click', function(e) {
            // Kiểm tra nếu user chưa có quyền truy cập
            {% if not user.is_authenticated or not user.is_staff %}
                e.preventDefault();
                showToast('Tài khoản chưa được cấu hình đầy đủ hoặc không có quyền truy cập Dashboard!', 'error');
            {% elif user.is_authenticated and not user.userprofile %}
                e.preventDefault();
                showToast('Tài khoản chưa có profile. Vui lòng liên hệ admin để được cấu hình!', 'error');
            {% endif %}
        });
    }
    
    // Hiển thị thông báo từ Django messages framework
    {% if messages %}
        {% for message in messages %}
            showToast('{{ message }}', '{% if message.tags == "error" %}error{% else %}success{% endif %}');
        {% endfor %}
    {% endif %}
});

// CSS animation cho fadeOutRight
const style = document.createElement('style');
style.textContent = `
    @keyframes fadeOutRight {
        from { opacity: 1; transform: translateX(0); }
        to { opacity: 0; transform: translateX(100%); }
    }
    @keyframes fadeInRight {
        from { opacity: 0; transform: translateX(100%); }
        to { opacity: 1; transform: translateX(0); }
    }
`;
document.head.appendChild(style);
</script>
</body>
</html>
<!-- Zalo Logo và Menu Chat -->
<div id="zalo-chat-widget" style="display: none; position: fixed; bottom: 10%; right: 120px; width: 300px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000;">
    <div style="padding: 15px; background: #0068ff; color: white; border-radius: 10px 10px 0 0; display: flex; justify-content: space-between; align-items: center;">
        <span style="font-weight: bold;">Chat với chúng tôi</span>
        <span onclick="closeZaloChat()" style="cursor: pointer;">✕</span>
    </div>
    <div style="padding: 20px;">
        <div style="text-align: center; margin-bottom: 20px;">
            <img src="/static/image/Icon_of_Zalo.png" alt="Zalo Logo" style="width: 50px; height: 50px; margin-bottom: 10px;">
            <p style="margin: 0;">Chào bạn!</p>
            <p style="margin: 5px 0;">Chọn phương thức chat:</p>
        </div>
        
        <!-- Hai nút chat -->
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <a href="https://zalo.me/0369617913" target="_blank" style="display: block; background: #0068ff; color: white; text-decoration: none; padding: 12px; border-radius: 5px; text-align: center;">
                <i class="fab fa-facebook-messenger" style="margin-right: 8px;"></i>
                Chat qua Zalo
            </a>
            
            <button onclick="openQuickChat()" style="background: #28a745; color: white; border: none; padding: 12px; border-radius: 5px; cursor: pointer;">
                <i class="fas fa-comments" style="margin-right: 8px;"></i>
                Chat với Admin
            </button>
        </div>
    </div>
</div>

<!-- Cửa sổ Quick Chat -->
<div id="quick-chat-window" style="display: none; position: fixed; bottom: 10%; right: 120px; width: 300px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000;">
    <div style="padding: 15px; background: #28a745; color: white; border-radius: 10px 10px 0 0; display: flex; justify-content: space-between; align-items: center;">
        <span style="font-weight: bold;">Chat với Admin</span>
        <span onclick="closeQuickChat()" style="cursor: pointer;">✕</span>
    </div>
    <div style="padding: 20px; height: 300px; display: flex; flex-direction: column;">
        <div id="chat-messages" style="flex-grow: 1; overflow-y: auto; margin-bottom: 10px;">
            <!-- Tin nhắn sẽ được thêm vào đây -->
            <div style="text-align: center; color: #666; margin: 10px 0;">Bắt đầu cuộc trò chuyện</div>
        </div>
        <div style="display: flex; gap: 10px;">
            <input type="text" id="quick-chat-input" placeholder="Nhập tin nhắn..." style="flex-grow: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <button onclick="sendQuickMessage()" style="background: #28a745; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">
                Gửi
            </button>
        </div>
    </div>
</div>

<div id="zalo-logo" onclick="toggleZaloChat()" style="cursor: pointer;">
    <img src="/static/image/Icon_of_Zalo.png" alt="Zalo Logo" style="width: 50px; height: 50px; position: fixed; bottom: 10%; right: 50px;">
</div>

<script>
function toggleZaloChat() {
    var widget = document.getElementById('zalo-chat-widget');
    var quickChat = document.getElementById('quick-chat-window');
    if (widget.style.display === 'none') {
        widget.style.display = 'block';
        quickChat.style.display = 'none';
    } else {
        widget.style.display = 'none';
    }
}

function closeZaloChat() {
    document.getElementById('zalo-chat-widget').style.display = 'none';
}

function openQuickChat() {
    document.getElementById('zalo-chat-widget').style.display = 'none';
    document.getElementById('quick-chat-window').style.display = 'block';
}

function closeQuickChat() {
    document.getElementById('quick-chat-window').style.display = 'none';
}

function sendQuickMessage() {
    var input = document.getElementById('quick-chat-input');
    var message = input.value.trim();
    
    if (message) {
        var messagesDiv = document.getElementById('chat-messages');
        var messageElement = document.createElement('div');
        messageElement.style.cssText = 'background: #e9ecef; padding: 8px; border-radius: 4px; margin: 5px 0; align-self: flex-end;';
        messageElement.textContent = message;
        
        messagesDiv.appendChild(messageElement);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
        input.value = '';
        
        // Thêm phản hồi tự động từ admin (có thể thay thế bằng logic backend thực tế)
        setTimeout(() => {
            var adminResponse = document.createElement('div');
            adminResponse.style.cssText = 'background: #28a745; color: white; padding: 8px; border-radius: 4px; margin: 5px 0; align-self: flex-start;';
            adminResponse.textContent = 'Cảm ơn bạn đã liên hệ. Chúng tôi sẽ phản hồi sớm nhất có thể!';
            messagesDiv.appendChild(adminResponse);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }, 1000);
    }
}
</script>

<script>
// Function để hiển thị toast notification
function showToast(message, type = 'error') {
    const toastContainer = document.getElementById('toastContainer');
    
    const toast = document.createElement('div');
    toast.className = 'toast';
    
    const toastHeader = document.createElement('div');
    toastHeader.className = 'toast-header';
    
    const icon = type === 'error' ? '❌' : '✅';
    const title = type === 'error' ? 'Lỗi' : 'Thành công';
    
    toastHeader.innerHTML = `
        <span style="margin-right: 10px;">${icon}</span>
        <strong>${title}</strong>
        <button type="button" class="btn-close" onclick="closeToast(this)" style="background: none; border: none; font-size: 18px; margin-left: auto; cursor: pointer;">×</button>
    `;
    
    const toastBody = document.createElement('div');
    toastBody.className = 'toast-body';
    toastBody.textContent = message;
    
    toast.appendChild(toastHeader);
    toast.appendChild(toastBody);
    toastContainer.appendChild(toast);
    
    // Hiển thị toast
    setTimeout(() => {
        toast.classList.add('show');
    }, 100);
    
    // Tự động ẩn sau 5 giây
    setTimeout(() => {
        closeToast(toast.querySelector('.btn-close'));
    }, 5000);
}

function closeToast(button) {
    const toast = button.closest('.toast');
    toast.style.animation = 'fadeOutRight 0.5s';
    setTimeout(() => {
        toast.remove();
    }, 500);
}

// Kiểm tra khi click vào Dashboard link
document.addEventListener('DOMContentLoaded', function() {
    const dashboardLink = document.querySelector('a[href*="staff_dashboard"]');
    if (dashboardLink) {
        dashboardLink.addEventListener('click', function(e) {
            // Kiểm tra nếu user chưa có quyền truy cập
            {% if not user.is_authenticated or not user.is_staff %}
                e.preventDefault();
                showToast('Tài khoản chưa được cấu hình đầy đủ hoặc không có quyền truy cập Dashboard!', 'error');
            {% elif user.is_authenticated and not user.userprofile %}
                e.preventDefault();
                showToast('Tài khoản chưa có profile. Vui lòng liên hệ admin để được cấu hình!', 'error');
            {% endif %}
        });
    }
    
    // Hiển thị thông báo từ Django messages framework
    {% if messages %}
        {% for message in messages %}
            showToast('{{ message }}', '{% if message.tags == "error" %}error{% else %}success{% endif %}');
        {% endfor %}
    {% endif %}
});

// CSS animation cho fadeOutRight
const style = document.createElement('style');
style.textContent = `
    @keyframes fadeOutRight {
        from { opacity: 1; transform: translateX(0); }
        to { opacity: 0; transform: translateX(100%); }
    }
    @keyframes fadeInRight {
        from { opacity: 0; transform: translateX(100%); }
        to { opacity: 1; transform: translateX(0); }
    }
`;
document.head.appendChild(style);
</script>
</body>
</html>
<!-- Zalo Logo và Menu Chat -->
<div id="zalo-chat-widget" style="display: none; position: fixed; bottom: 10%; right: 120px; width: 300px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000;">
    <div style="padding: 15px; background: #0068ff; color: white; border-radius: 10px 10px 0 0; display: flex; justify-content: space-between; align-items: center;">
        <span style="font-weight: bold;">Chat với chúng tôi</span>
        <span onclick="closeZaloChat()" style="cursor: pointer;">✕</span>
    </div>
    <div style="padding: 20px;">
        <div style="text-align: center; margin-bottom: 20px;">
            <img src="/static/image/Icon_of_Zalo.png" alt="Zalo Logo" style="width: 50px; height: 50px; margin-bottom: 10px;">
            <p style="margin: 0;">Chào bạn!</p>
            <p style="margin: 5px 0;">Chọn phương thức chat:</p>
        </div>
        
        <!-- Hai nút chat -->
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <a href="https://zalo.me/0369617913" target="_blank" style="display: block; background: #0068ff; color: white; text-decoration: none; padding: 12px; border-radius: 5px; text-align: center;">
                <i class="fab fa-facebook-messenger" style="margin-right: 8px;"></i>
                Chat qua Zalo
            </a>
            
            <button onclick="openQuickChat()" style="background: #28a745; color: white; border: none; padding: 12px; border-radius: 5px; cursor: pointer;">
                <i class="fas fa-comments" style="margin-right: 8px;"></i>
                Chat với Admin
            </button>
        </div>
    </div>
</div>

<!-- Cửa sổ Quick Chat -->
<div id="quick-chat-window" style="display: none; position: fixed; bottom: 10%; right: 120px; width: 300px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000;">
    <div style="padding: 15px; background: #28a745; color: white; border-radius: 10px 10px 0 0; display: flex; justify-content: space-between; align-items: center;">
        <span style="font-weight: bold;">Chat với Admin</span>
        <span onclick="closeQuickChat()" style="cursor: pointer;">✕</span>
    </div>
    <div style="padding: 20px; height: 300px; display: flex; flex-direction: column;">
        <div id="chat-messages" style="flex-grow: 1; overflow-y: auto; margin-bottom: 10px;">
            <!-- Tin nhắn sẽ được thêm vào đây -->
            <div style="text-align: center; color: #666; margin: 10px 0;">Bắt đầu cuộc trò chuyện</div>
        </div>
        <div style="display: flex; gap: 10px;">
            <input type="text" id="quick-chat-input" placeholder="Nhập tin nhắn..." style="flex-grow: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <button onclick="sendQuickMessage()" style="background: #28a745; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">
                Gửi
            </button>
        </div>
    </div>
</div>

<div id="zalo-logo" onclick="toggleZaloChat()" style="cursor: pointer;">
    <img src="/static/image/Icon_of_Zalo.png" alt="Zalo Logo" style="width: 50px; height: 50px; position: fixed; bottom: 10%; right: 50px;">
</div>

<script>
function toggleZaloChat() {
    var widget = document.getElementById('zalo-chat-widget');
    var quickChat = document.getElementById('quick-chat-window');
    if (widget.style.display === 'none') {
        widget.style.display = 'block';
        quickChat.style.display = 'none';
    } else {
        widget.style.display = 'none';
    }
}

function closeZaloChat() {
    document.getElementById('zalo-chat-widget').style.display = 'none';
}

function openQuickChat() {
    document.getElementById('zalo-chat-widget').style.display = 'none';
    document.getElementById('quick-chat-window').style.display = 'block';
}

function closeQuickChat() {
    document.getElementById('quick-chat-window').style.display = 'none';
}

function sendQuickMessage() {
    var input = document.getElementById('quick-chat-input');
    var message = input.value.trim();
    
    if (message) {
        var messagesDiv = document.getElementById('chat-messages');
        var messageElement = document.createElement('div');
        messageElement.style.cssText = 'background: #e9ecef; padding: 8px; border-radius: 4px; margin: 5px 0; align-self: flex-end;';
        messageElement.textContent = message;
        
        messagesDiv.appendChild(messageElement);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;
        input.value = '';
        
        // Thêm phản hồi tự động từ admin (có thể thay thế bằng logic backend thực tế)
        setTimeout(() => {
            var adminResponse = document.createElement('div');
            adminResponse.style.cssText = 'background: #28a745; color: white; padding: 8px; border-radius: 4px; margin: 5px 0; align-self: flex-start;';
            adminResponse.textContent = 'Cảm ơn bạn đã liên hệ. Chúng tôi sẽ phản hồi sớm nhất có thể!';
            messagesDiv.appendChild(adminResponse);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }, 1000);
    }
}
</script>

<script>
// Function để hiển thị toast notification
function showToast(message, type = 'error') {
    const toastContainer = document.getElementById('toastContainer');
    
    const toast = document.createElement('div');
    toast.className = 'toast';
    
    const toastHeader = document.createElement('div');
    toastHeader.className = 'toast-header';
    
    const icon = type === 'error' ? '❌' : '✅';
    const title = type === 'error' ? 'Lỗi' : 'Thành công';
    
    toastHeader.innerHTML = `
        <span style="margin-right: 10px;">${icon}</span>
        <strong>${title}</strong>
        <button type="button" class="btn-close" onclick="closeToast(this)" style="background: none; border: none; font-size: 18px; margin-left: auto; cursor: pointer;">×</button>
    `;
    
    const toastBody = document.createElement('div');
    toastBody.className = 'toast-body';
    toastBody.textContent = message;
    
    toast.appendChild(toastHeader);
    toast.appendChild(toastBody);
    toastContainer.appendChild(toast);
    
    // Hiển thị toast
    setTimeout(() => {
        toast.classList.add('show');
    }, 100);
    
    // Tự động ẩn sau 5 giây
    setTimeout(() => {
        closeToast(toast.querySelector('.btn-close'));
    }, 5000);
}

function closeToast(button) {
    const toast = button.closest('.toast');
    toast.style.animation = 'fadeOutRight 0.5s';
    setTimeout(() => {
        toast.remove();
    }, 500);
}

// Kiểm tra khi click vào Dashboard link
document.addEventListener('DOMContentLoaded', function() {
    const dashboardLink = document.querySelector('a[href*="staff_dashboard"]');
    if (dashboardLink) {
        dashboardLink.addEventListener('click', function(e) {
            // Kiểm tra nếu user chưa có quyền truy cập
            {% if not user.is_authenticated or not user.is_staff %}
                e.preventDefault();
                showToast('Tài khoản chưa được cấu hình đầy đủ hoặc không có quyền truy cập Dashboard!', 'error');
            {% elif user.is_authenticated and not user.userprofile %}
                e.preventDefault();
                showToast('Tài khoản chưa có profile. Vui lòng liên hệ admin để được cấu hình!', 'error');
            {% endif %}
        });
    }
    
    // Hiển thị thông báo từ Django messages framework
    {% if messages %}
        {% for message in messages %}
            showToast('{{ message }}', '{% if message.tags == "error" %}error{% else %}success{% endif %}');
        {% endfor %}
    {% endif %}
});

// CSS animation cho fadeOutRight
const style = document.createElement('style');
style.textContent = `
    @keyframes fadeOutRight {
        from { opacity: 1; transform: translateX(0); }
        to { opacity: 0; transform: translateX(100%); }
    }
    @keyframes fadeInRight {
        from { opacity: 0; transform: translateX(100%); }
        to { opacity: 1; transform: translateX(0); }
    }
`;
document.head.appendChild(style);
</script>
</body>
</html>
<!-- Zalo Logo và Menu Chat -->
<div id="zalo-chat-widget" style="display: none; position: fixed; bottom: 10%; right: 120px; width: 300px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000;">
    <div style="padding: 15px; background: #0068ff; color: white; border-radius: 10px 10px 0 0; display: flex; justify-content: space-between; align-items: center;">
        <span style="font-weight: bold;">Chat với chúng tôi</span>
        <span onclick="closeZaloChat()" style="cursor: pointer;">✕</span>
    </div>
    <div style="padding: 20px;">
        <div style="text-align: center; margin-bottom: 20px;">
            <img src="/static/image/Icon_of_Zalo.png" alt="Zalo Logo" style="width: 50px; height: 50px; margin-bottom: 10px;">
            <p style="margin: 0;">Chào bạn!</p>
            <p style="margin: 5px 0;">Chọn phương thức chat:</p>
        </div>
        
        <!-- Hai nút chat -->
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <a href="https://zalo.me/0369617913" target="_blank" style="display: block; background: #0068ff; color: white; text-decoration: none; padding: 12px; border-radius: 5px; text-align: center;">
                <i class="fab fa-facebook-messenger" style="margin-right: 8px;"></i>
                Chat qua Zalo
            </a>
            
            <button onclick="openQuickChat()" style="background: #28a745; color: white; border: none; padding: 12px; border-radius: 5px; cursor: pointer;">
                <i class="fas fa-comments" style="margin-right: 8px;"></i>
                Chat với Admin
            </button>
        </div>
    </div>
</div>

<!-- Cửa sổ Quick Chat -->
<div id="quick-chat-window" style="display: none; position: fixed; bottom: 10%; right: 120px; width: 300px; background: white; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 1000;">
    <div style="padding: 15px; background: #28a745; color: white; border-radius: 10px 10px 0 0; display: flex; justify-content: space-between; align-items: center;">
        <span style="font-weight: bold;">Chat với Admin</span>
        <span onclick="closeQuickChat()" style="cursor: pointer;">✕</span>
    </div>
    <div style="padding: 20px; height: 300px; display: flex; flex-direction: column;">
        <div id="chat-messages" style="flex-grow: 1; overflow-y: auto; margin-bottom: 10px;">
            <!-- Tin nhắn sẽ được thêm vào đây -->
            <div style="text-align: center; color: #666; margin: 10px 0;">Bắt đầu cuộc trò chuyện</div>
        </div>
        <div style="display: flex; gap: 10px;">
            <input type="text" id="quick-chat-input" placeholder="Nhập tin nhắn..." style="flex-grow: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            <button onclick="sendQuickMessage()" style="background: #28a745; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer;">
                Gửi
            </button>
        </div>
    </div>
</div>

<div id="zalo-logo" onclick="toggleZaloChat()" style="cursor: pointer;">
    <img src="/static/image/Icon_of_Zalo.png" alt="Zalo Logo" style="width: 50px; height: 50px; position: fixed; bottom: 10%; right: 50px;">
</div>

<script>
function toggleZaloChat() {
    var widget = document.getElementById('zalo-chat-widget');
    var quickChat = document.getElementById('quick-chat-window');
    if (widget.style.display === 'none') {
        widget.style.display = 'block';
        quickChat.style.display = 'none';
    } else {
        widget.style.display = 'none';
    }
}

function closeZaloChat() {
    document.getElementById('zalo-chat-widget').style.display = 'none';
}

function openQuickChat() {
    document.getElementById('zalo-chat-
