// Translations for the website
const translations = {
    vi: {
        // Navigation
        'home': 'Trang chủ',
        'about': 'Giới thiệu',
        'services': 'Dịch vụ',
        'projects': 'Dự án',
        'blog': 'Bài viết',
        'contact': 'Liên hệ',
        'login': 'Đăng nhập',
        'logout': 'Đăng xuất',
        'dashboard': 'Bảng điều khiển',
        
        // Hero Section
        'hero_title': 'HITECH NDT',
        'hero_subtitle': 'Công nghệ kiểm tra không phá hủy hàng đầu Việt Nam với các giải pháp tiên tiến và đội ngũ chuyên gia giàu kinh nghiệm',
        'discover_services': 'Khám phá dịch vụ',
        'contact_now': 'Liên hệ ngay',
        
        // NDT Methods Section
        'ndt_methods_title': 'Phương pháp NDT chuyên nghiệp',
        'ndt_methods_subtitle': 'Ứng dụng công nghệ tiên tiến trong kiểm tra không phá hủy',
        'ultrasonic_testing': 'Siêu âm (UT)',
        'ultrasonic_desc': 'Phương pháp kiểm tra bằng sóng siêu âm tần số cao để phát hiện khuyết tật bên trong vật liệu',
        'radiographic_testing': 'Chụp X-quang (RT)',
        'radiographic_desc': 'Sử dụng tia X hoặc gamma để tạo hình ảnh cấu trúc bên trong của vật liệu',
        'magnetic_testing': 'Từ tính (MT)',
        'magnetic_desc': 'Phát hiện khuyết tật bề mặt và gần bề mặt trong vật liệu sắt từ',
        'penetrant_testing': 'Thấm màu (PT)',
        'penetrant_desc': 'Phương pháp kiểm tra khuyết tật bề mặt bằng chất lỏng thấm có màu',
        'eddy_current_testing': 'Dòng xoáy (ET)',
        'eddy_current_desc': 'Sử dụng dòng điện xoáy để phát hiện khuyết tật và đo độ dày vật liệu',
        'visual_testing': 'Quan sát trực tiếp (VT)',
        'visual_desc': 'Kiểm tra bằng mắt thường hoặc dụng cụ hỗ trợ để phát hiện khuyết tật bề mặt',
        
        // Services Section
        'services_title': 'Dịch vụ chuyên nghiệp',
        'services_subtitle': 'Giải pháp toàn diện cho mọi nhu cầu kiểm tra và đào tạo',
        'view_details': 'Xem chi tiết',
        
        // Projects Section
        'projects_title': 'Dự án tiêu biểu',
        'projects_subtitle': 'Những dự án tiêu biểu đã thực hiện thành công',
        'view_all_projects': 'Xem tất cả dự án',
        
        // About Section
        'about_title': 'Vì sao chọn Hitech NDT?',
        'professional': 'Chuyên nghiệp',
        'professional_desc': 'Đội ngũ kỹ sư có chứng chỉ quốc tế và kinh nghiệm thực tiễn',
        'advanced_technology': 'Công nghệ tiên tiến',
        'advanced_technology_desc': 'Trang thiết bị hiện đại nhập khẩu từ các nước phát triển',
        'fast': 'Nhanh chóng',
        'fast_desc': 'Thời gian thực hiện nhanh, báo cáo kết quả chính xác',
        'reliable': 'Tin cậy',
        'reliable_desc': 'Được hàng trăm khách hàng lớn tin tưởng và hợp tác lâu dài',
        
        // Testimonials
        'testimonials_title': 'Khách hàng nói về chúng tôi',
        'testimonials_subtitle': 'Phản hồi từ những khách hàng đã tin tưởng sử dụng dịch vụ',
        
        // Blog Section
        'blog_title': 'Tin tức & Bài viết',
        'blog_subtitle': 'Cập nhật những thông tin mới nhất về công nghệ NDT',
        'read_more': 'Đọc thêm',
        'view_all_posts': 'Xem tất cả bài viết',
        
        // Footer
        'quick_links': 'Liên kết nhanh',
        'contact_info': 'Thông tin liên hệ',
        'company_info': 'Thông tin công ty',
        'follow_us': 'Theo dõi chúng tôi',
        'copyright': 'Bản quyền thuộc về Hitech NDT. Tất cả quyền được bảo lưu.',
        
        // Common
        'learn_more': 'Tìm hiểu thêm',
        'get_quote': 'Nhận báo giá',
        'call_now': 'Gọi ngay',
        'email_us': 'Gửi email',
        'address': 'Địa chỉ',
        'phone': 'Điện thoại',
        'email': 'Email',
        'website': 'Website',
        
        // Stats
        'projects_completed': 'Dự án hoàn thành',
        'years_experience': 'Năm kinh nghiệm',
        'trusted_clients': 'Khách hàng tin tưởng',
        'customer_support': 'Hỗ trợ khách hàng'
    },
    
    en: {
        // Navigation
        'home': 'Home',
        'about': 'About',
        'services': 'Services',
        'projects': 'Projects',
        'blog': 'Blog',
        'contact': 'Contact',
        'login': 'Login',
        'logout': 'Logout',
        'dashboard': 'Dashboard',
        
        // Hero Section
        'hero_title': 'HITECH NDT',
        'hero_subtitle': 'Leading Non-Destructive Testing technology in Vietnam with advanced solutions and experienced professional team',
        'discover_services': 'Discover Services',
        'contact_now': 'Contact Now',
        
        // NDT Methods Section
        'ndt_methods_title': 'Professional NDT Methods',
        'ndt_methods_subtitle': 'Advanced technology applications in non-destructive testing',
        'ultrasonic_testing': 'Ultrasonic Testing (UT)',
        'ultrasonic_desc': 'High-frequency ultrasonic wave testing method to detect internal material defects',
        'radiographic_testing': 'Radiographic Testing (RT)',
        'radiographic_desc': 'Using X-rays or gamma rays to create images of internal material structure',
        'magnetic_testing': 'Magnetic Testing (MT)',
        'magnetic_desc': 'Detection of surface and near-surface defects in ferromagnetic materials',
        'penetrant_testing': 'Penetrant Testing (PT)',
        'penetrant_desc': 'Surface defect testing method using colored penetrating liquid',
        'eddy_current_testing': 'Eddy Current Testing (ET)',
        'eddy_current_desc': 'Using eddy currents to detect defects and measure material thickness',
        'visual_testing': 'Visual Testing (VT)',
        'visual_desc': 'Inspection with naked eye or assistive tools to detect surface defects',
        
        // Services Section
        'services_title': 'Professional Services',
        'services_subtitle': 'Comprehensive solutions for all testing and training needs',
        'view_details': 'View Details',
        
        // Projects Section
        'projects_title': 'Featured Projects',
        'projects_subtitle': 'Outstanding projects successfully completed',
        'view_all_projects': 'View All Projects',
        
        // About Section
        'about_title': 'Why Choose Hitech NDT?',
        'professional': 'Professional',
        'professional_desc': 'Engineering team with international certificates and practical experience',
        'advanced_technology': 'Advanced Technology',
        'advanced_technology_desc': 'Modern equipment imported from developed countries',
        'fast': 'Fast',
        'fast_desc': 'Quick execution time, accurate result reporting',
        'reliable': 'Reliable',
        'reliable_desc': 'Trusted by hundreds of large clients for long-term cooperation',
        
        // Testimonials
        'testimonials_title': 'What Our Clients Say',
        'testimonials_subtitle': 'Feedback from clients who trust our services',
        
        // Blog Section
        'blog_title': 'News & Articles',
        'blog_subtitle': 'Latest updates on NDT technology',
        'read_more': 'Read More',
        'view_all_posts': 'View All Posts',
        
        // Footer
        'quick_links': 'Quick Links',
        'contact_info': 'Contact Info',
        'company_info': 'Company Info',
        'follow_us': 'Follow Us',
        'copyright': 'Copyright © Hitech NDT. All rights reserved.',
        
        // Common
        'learn_more': 'Learn More',
        'get_quote': 'Get Quote',
        'call_now': 'Call Now',
        'email_us': 'Email Us',
        'address': 'Address',
        'phone': 'Phone',
        'email': 'Email',
        'website': 'Website',
        
        // Stats
        'projects_completed': 'Projects Completed',
        'years_experience': 'Years Experience',
        'trusted_clients': 'Trusted Clients',
        'customer_support': 'Customer Support'
    }
};

// Language switching functions
function getCurrentLanguage() {
    return localStorage.getItem('preferredLanguage') || 'vi';
}

function setLanguage(lang) {
    localStorage.setItem('preferredLanguage', lang);
    updatePageLanguage(lang);
    updateLanguageSelector(lang);
    
    // Send AJAX request to update server-side language
    fetch('/change-language/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
            'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
        },
        body: `language=${lang}`
    });
}

function updatePageLanguage(lang) {
    const t = translations[lang];
    
    // Update all elements with data-translate attribute
    document.querySelectorAll('[data-translate]').forEach(el => {
        const key = el.getAttribute('data-translate');
        if (t[key]) {
            if (el.tagName === 'INPUT' && el.type === 'submit') {
                el.value = t[key];
            } else {
                el.textContent = t[key];
            }
        }
    });
    
    // Update document language
    document.documentElement.lang = lang;
}

function updateLanguageSelector(lang) {
    const flagImg = document.querySelector('#languageDropdown img');
    const languageDropdown = document.querySelector('#languageDropdown');
    
    if (lang === 'en') {
        flagImg.src = '/static/images/flags/usa.svg';
        flagImg.alt = 'EN';
        // Cập nhật text hiển thị thành EN
        languageDropdown.innerHTML = '<img src="/static/images/flags/usa.svg" alt="EN" class="flag-icon"> EN';
    } else {
        flagImg.src = '/static/images/flags/vietnam.svg';
        flagImg.alt = 'VI';
        // Cập nhật text hiển thị thành VI
        languageDropdown.innerHTML = '<img src="/static/images/flags/vietnam.svg" alt="VI" class="flag-icon"> VI';
    }
}

// Initialize language on page load
document.addEventListener('DOMContentLoaded', function() {
    const currentLang = getCurrentLanguage();
    updatePageLanguage(currentLang);
    updateLanguageSelector(currentLang);
    
    // Add event listeners to language switchers
    document.querySelectorAll('[data-lang]').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const lang = this.getAttribute('data-lang');
            
            // Add transition effect
            document.body.style.transition = 'opacity 0.3s ease';
            document.body.style.opacity = '0.8';
            
            setTimeout(() => {
                setLanguage(lang);
                document.body.style.opacity = '1';
            }, 150);
        });
    });
}); 